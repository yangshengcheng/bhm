SELECT to_char(sysdate,'YYYYMMDDHH24MMSS'),'|ORA_TBS', '|UDM_ORA_TBS_SIZE','|OracleInstance',(select INSTANCE_NAME from V$INSTANCE  ) as instance,'/',TABLESPACE_NAME as name,'|',sum(BYTES/1024/1024) as BYTES ,'|&1' FROM dba_data_files  group  by TABLESPACE_NAME ;
select to_char(sysdate,'YYYYMMDDHH24MMSS'),'|ORA_TBS', '|UDM_ORA_TBS_USAGED','|OracleInstance',(select instance_name from  v$instance) instance,'/',a.tablespace_name name,'|',to_char((total - free)*100 / total,'90.99') ,'|&1' from  (select tablespace_name,sum(BYTES) free from  dba_free_space group  by  tablespace_name) a,(select tablespace_name,sum(BYTES) total from dba_data_files group  by  tablespace_name) b where a.tablespace_name = b.tablespace_name;